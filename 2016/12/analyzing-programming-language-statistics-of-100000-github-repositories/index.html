<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Analyzing programming language statistics of 100,000 Github repositories</title>
  <meta property="og:title" content="Analyzing programming language statistics of 100,000 Github repositories" />
  <meta name="twitter:title" content="Analyzing programming language statistics of 100,000 Github …" />
  <meta name="description" content="The first step is to gather data about 100,000 repositories using the Github api. I used scrapy for this.

A high level overview of how I did this:


Start from the id of my scrape_github repo https://api.github.com/repositories?since=76761293&amp;access_token=MY_TOKEN

Save only the id, name and languages_url for each repo. The languages_url is the api endpoint which contains the programming language statistics of the current repo.

Extract the link to the next page from the Link header and follow it repeating the above steps.


Each api call returns a list of 100 repositories, so to retrieve data about 100,000 repositories, 1000 api calls are required.

All the output is saved to a file called all_repos.jsonl which came to around 13MB.

The next step is to follow the languages_url api endpoint for each repository and save the data.

">
  <meta property="og:description" content="The first step is to gather data about 100,000 repositories using the Github api. I used scrapy for this.

A high level overview of how I did this:


Start from the id of my scrape_github repo https://api.github.com/repositories?since=76761293&amp;access_token=MY_TOKEN

Save only the id, name and languages_url for each repo. The languages_url is the api endpoint which contains the programming language statistics of the current repo.

Extract the link to the next page from the Link header and follow it repeating the above steps.


Each api call returns a list of 100 repositories, so to retrieve data about 100,000 repositories, 1000 api calls are required.

All the output is saved to a file called all_repos.jsonl which came to around 13MB.

The next step is to follow the languages_url api endpoint for each repository and save the data.

">
  <meta name="twitter:description" content="The first step is to gather data about 100,000 repositories using the Github api. I used scrapy for this.

A high level overview of how I did this:


Start from the id of my scrape_github repo …">
  <meta name="author" content="Plogging Dev"/>
  <meta property="og:image" content="https://www.ploggingdev.com/img/avatar.png" />
  <meta name="twitter:image" content="https://www.ploggingdev.com/img/avatar.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@ploggingdev" />
  <meta name="twitter:creator" content="@ploggingdev" />
  <meta property="og:url" content="https://www.ploggingdev.com/2016/12/analyzing-programming-language-statistics-of-100000-github-repositories/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Plogging Dev" />

  <meta name="generator" content="Hugo 0.29" />
  <link rel="canonical" href="https://www.ploggingdev.com/2016/12/analyzing-programming-language-statistics-of-100000-github-repositories/" />
  <link rel="alternate" href="https://www.ploggingdev.com/index.xml" type="application/rss+xml" title="Plogging Dev">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://www.ploggingdev.com/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://www.ploggingdev.com/css/pygment_highlights.css" />
  <link rel="stylesheet" href="https://www.ploggingdev.com/css/highlight.min.css" />

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-86436693-1 ', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">
<meta name="description" content="Analyzing programming language statistics of 100,000 Github repositories">

  
  <meta name="keywords" content="python 3, webscraping, scrapy, requests, scrape github">
  
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.ploggingdev.com/">Plogging Dev</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Archive" href="/archive/">Archive</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Plogging Dev" href="https://www.ploggingdev.com/">
            <img class="avatar-img" src="https://www.ploggingdev.com/img/avatar.png" alt="Plogging Dev" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Analyzing programming language statistics of 100,000 Github repositories</h1>
                
                
                  <span class="post-meta">
  Posted on December 25, 2016
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>The first step is to gather data about 100,000 repositories using the Github api. I used <code>scrapy</code> for this.</p>

<p>A high level overview of how I did this:</p>

<ol>
<li><p>Start from the id of my <code>scrape_github</code> repo <code>https://api.github.com/repositories?since=76761293&amp;access_token=MY_TOKEN</code></p></li>

<li><p>Save only the <code>id</code>, <code>name</code> and <code>languages_url</code> for each repo. The <code>languages_url</code> is the api endpoint which contains the programming language statistics of the current repo.</p></li>

<li><p>Extract the link to the next page from the <code>Link</code> header and follow it repeating the above steps.</p></li>
</ol>

<p>Each api call returns a list of 100 repositories, so to retrieve data about 100,000 repositories, 1000 api calls are required.</p>

<p>All the output is saved to a file called <code>all_repos.jsonl</code> which came to around 13MB.</p>

<p>The next step is to follow the <code>languages_url</code> api endpoint for each repository and save the data.</p>

<p></p>

<p>A high level overview of how I did this:</p>

<ol>
<li><p>Read a line from <code>all_repos.jsonl</code></p></li>

<li><p>Retrieve data from the <code>languages_url</code> endpoint</p></li>

<li><p>If an exception occurred, output an empty json object to <code>lang_data.jsonl</code></p></li>

<li><p>Otherwise save the response to <code>lang_data.jsonl</code></p></li>

<li><p>Check headers to see if api limit has been reached</p></li>

<li><p>If api limit is reached, sleep until the api limit is reset</p></li>

<li><p>Otherwise go to step 1 and repeat until all lines have been read</p></li>
</ol>

<p>There were a few HTTPError exceptions (returned HTTP 403 and 404 status codes) since Github blocked a few repositories for violating their Terms of Service. Around 3 such exceptions in the first 5000 repositories. There were also a lot of empty repositories.</p>

<p>The api limit for Github is 5000 calls per hour. The headers include <code>X-RateLimit-Remaining</code> which specifies how many api calls are remaining in the current hour. The <code>X-RateLimit-Reset</code> header contains a number which specifies when the ratelimit will be reset. It is respresented as the seconds since the Unix epoch. These headers are used to check if the api limit has been reached and how much time to sleep for, if the limit has been reached.</p>

<p>The total number of api calls made in this step is 100,000 which took a little over 20 hours to complete. I ran this in a VPS.</p>

<p>Interesting to note that it takes around 5 minutes to make the 5000 api calls on the VPS. So the script is sleeping for the remaining 55+ minutes per hour. I took a screenshot of the bandwidth usage of the VPS the script was running on and it was nice to see a spike every hour (script is calling the Github api) and then go back to zero usage (script is sleeping) until the next spike. Here is the screenshot.</p>

<p><img src="/images/clockwork_code.png" alt="Bandwidth usage over 24 hours" /></p>

<p>Once all the relevant data was retrieved, the next step was to plot some graphs. Note that a single repository can include code using multiple programming languages.</p>

<p>I was interested in the following data:</p>

<p>Size of code vs programming language:</p>

<p><img src="/images/size_vs_lang.png" alt="Size of code vs programming language" /></p>

<p>Repos appeared in vs programming language:</p>

<p><img src="/images/repos_vs_lang.png" alt="Repos appeared in vs programming language:" /></p>

<p>Megabytes/repo vs programming language:</p>

<p><img src="/images/mb_per_repo_vs_lang.png" alt="Megabytes/repo vs programming language:" /></p>

<p>Take this data with a pinch of salt as it only represents the repositories created approximately over a 2 day perioid. Initially I planned to consider all repos created in 2016, but the sheer scale of Github made me rethink my plans. Extrapolating the number of repos created over 2 days to the the entire year, the number comes to around 18 million repos created in 2016. Besides, the point of the project was to learn a little about <code>scrapy</code>.</p>

<p>Here is the <a href="https://github.com/ploggingdev/scrape_github">code</a>.</p>

<p>The installation instructions are on the readme file.</p>

<p>The repo also includes the data I gathered from the github api:</p>

<ul>
<li><p><a href="https://github.com/ploggingdev/scrape_github/blob/master/lang_data.jsonl">lang_data.jsonl (3MB)</a></p></li>

<li><p><a href="https://github.com/ploggingdev/scrape_github/blob/master/github_scraper/all_repos.jsonl">all_repos.jsonl (13MB)</a></p></li>
</ul>
      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="https://www.ploggingdev.com/2016/12/scraping-my-website-using-requests-and-beautifulsoup/" data-toggle="tooltip" data-placement="top" title="Scraping my website using requests and BeautifulSoup">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="https://www.ploggingdev.com/2017/01/multiprocessing-and-multithreading-in-python-3/" data-toggle="tooltip" data-placement="top" title="Multiprocessing and multithreading in Python 3">Next Post &rarr;</a>
          </li>
        
      </ul>

      </br>
</br>
<div id="hosted_comments">
    </div>
    <script src="https://www.hostedcomments.com/static/js/iframeResizer.min.js">
    </script>
    <script>
     function prepareFrame() {
                                    var hc_website = "https://www.hostedcomments.com/embeddedcomments/";
                                    var identifier = "admin_PloggingDev";
                                    var page_url = window.location.href;
                                    var encoded_url = encodeURIComponent(page_url);
                                    var iframe_src = hc_website + identifier + "/?url_path=" + encoded_url;
                                    var ifrm = document.createElement("iframe");
                                    ifrm.setAttribute('id', 'hosted_comments_iframe');
                                    ifrm.setAttribute("scrolling", "no");
                                    ifrm.setAttribute("src", iframe_src);
                                    ifrm.setAttribute("frameborder", "0");
                                    ifrm.setAttribute("sandbox", "allow-same-origin allow-scripts allow-popups allow-forms");
                                    ifrm.setAttribute("title", "Hosted Comments");
                                    ifrm.style.width = "100%";
                                    document.getElementById("hosted_comments").appendChild(ifrm);
                                }
                                prepareFrame();
                                iFrameResize({ checkOrigin : 'https://www.hostedcomments.com' } , document.getElementById("hosted_comments_iframe"))
    </script>
    <noscript>
     Please enable javascript to view the comments powered by
     <a href="https://www.hostedcomments.com">
      Hosted Comments
     </a>
     .
    </noscript>

      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:ploggingdev@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/ploggingdev" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/ploggingdev" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          Plogging Dev
          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="https://www.ploggingdev.com/">Plogging Dev</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.29</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://www.ploggingdev.com/js/main.js"></script>
<script src="https://www.ploggingdev.com/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>





  </body>
</html>

